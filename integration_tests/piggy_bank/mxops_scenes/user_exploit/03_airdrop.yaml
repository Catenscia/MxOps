allowed_networks:
  - localnet
  - testnet
  - devnet

allowed_scenario:
  - "integration_test_piggy_bank_user_exploit"

steps:
  - type: ContractCall
    sender: owner
    contract: "abc-esdt-minter"
    endpoint: addAirdropAmount
    gas_limit: 5000000
    arguments:
      - "[user]"
      - 100000

  - type: ContractCall
    sender: user
    contract: "abc-esdt-minter"
    endpoint: claimAirdrop
    gas_limit: 5000000
    checks:
      - type: Success

      - type: Transfers
        condition: exact
        include_gas_refund: false  # optional, false by default
        expected_transfers:
          - sender: "%abc-esdt-minter%address"
            receiver: "[user]"
            token_identifier: "%abc-esdt-minter%EsdtIdentifier"
            amount: 100000